'use strict';mix_d("SBVideoCards__sb-video-product-collection-desktop:sb-video-product-collection-desktop__0_wA4dKJ","exports tslib @c/logger @c/metrics @c/scoped-dom @c/dom @c/pagemarker @p/a-ajax @p/A @c/aui-carousel @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(va,m,wa,A,$a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb){function C(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}var ia=C(wa),
x=C($a),J=C(ab),lb=C(bb),mb=C(cb),t=C(db),nb=C(eb),q=C(fb),ja=C(gb),U=C(hb),xa=C(ib),ob=C(jb),pb=C(kb),N;(function(b){b.DOM_READY="DOM_READY";b.AF="AF"})(N||(N={}));var V=function(b,f){f=f||x["default"].cardRoot;return!b||f.matches(b)?f:f.querySelector(b)},ka=function(b,f){return(f=V("["+b+"]",f))?f.getAttribute(b):null},D=function(){return J["default"].cardRoot.ownerDocument},qb=function(b,f){void 0===f&&(f=N.DOM_READY);f===N.AF?P.when("af").execute(function(){return m.__awaiter(void 0,void 0,void 0,
function(){return m.__generator(this,function(g){b();return[2]})})}):lb["default"].pageReady.then(b,b)},ya=function(){},rb=function(b){var f=b.url,g=b.onSuccess,d=b.onError;f?mb["default"].get(f,{success:function(a){a&&"ok"===a.status?g(a):d()},error:d,abort:d}):d()},sb=function(b){var f=b.url,g=b.payload,d=b.onSuccess,a=void 0===d?ya:d;b=b.onError;b=void 0===b?ya:b;f?fetch(f,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:g}).then(function(c){if(!c.ok&&0!==c.status)throw Error(c.status+
" "+c.statusText);a(c)}).catch(b):b()},tb=function(b){try{var f=encodeURIComponent,g=JSON,d=g.stringify,a=JSON.parse(b);var c={adCreativeMetaData:{adId:a.feedbackRequestAdId,advertiserId:a.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:a.feedbackRequestAdvertiserIdNS,campaignId:a.feedbackRequestCampaignId,selectionSignals:za(a.feedbackRequestSelectionSignals)}]},adPlacementMetaData:{adElementId:a.adElementId,pageType:a.pageType,slotName:a.slotName}};
return"/af/feedback-link?pl="+f(d.call(g,c))}catch(e){return null}},la=function(){var b=V('[data-id="afb-sponsored"]');b&&(b.style.display="block")},wb=function(b,f){return m.__awaiter(void 0,void 0,void 0,function(){var g,d,a,c;return m.__generator(this,function(e){switch(e.label){case 0:g=f.cardName;d=f.isAdFeedbackForCards;if(!d)return[3,1];ub(f).then(function(){b.reportAdFeedbackLoadSucceeded()}).catch(function(h){b.reportAdFeedbackLoadFailedFromErr(h.message||"")});return[3,4];case 1:return e.trys.push([1,
3,,4]),[4,vb()];case 2:return e.sent(),b.reportAdFeedbackLoadSucceeded(),(a=x["default"].cardRoot.querySelector('[data-id="afb-content"]'))?a.querySelectorAll("a").forEach(function(h){h.addEventListener("click",b.reportAdFeedbackPopoverOpened)}):A.count(g+"-AdfeedbackElementNotFound"),[3,4];case 3:return c=e.sent(),b.reportAdFeedbackLoadFailedFromErr(c.message||""),[3,4];case 4:return[2]}})})},ub=function(b){return m.__awaiter(void 0,void 0,void 0,function(){var f,g,d,a,c;return m.__generator(this,
function(e){switch(e.label){case 0:f=ka("data-ad-feedback");g=ka("data-ad-feedback-label-id");d=b.enableAdFeedback;if(!f||!g)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];a=JSON.parse(f);c=function(){return{adFeedbackLabelId:g,adCreativeMetaData:{adCreativeDetails:a.creativeDetails.map(function(h,k){var p=h.adId,r=h.advertiserId,v=h.advertiserIdNS,u=h.campaignId,w=za(h.selectionSignals),y=h.title;(h=h.imageUrl)?(h={url:h,width:0,height:0},h={lowResolutionImage:h,highResolutionImages:[h]}):
h=void 0;return{adId:p,advertiserId:r,adCreativeIndex:k,adNetwork:"aax",advertiserIdNS:v,campaignId:u,selectionSignals:w,title:y,adCreativeImage:h}})}}};e.label=1;case 1:return e.trys.push([1,3,,4]),[4,d(c)];case 2:return e.sent(),[3,4];case 3:return e.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},vb=function(){var b=ka("data-ad-feedback");if(b){var f=tb(b);return new Promise(function(g,d){rb({url:f,onSuccess:function(a){try{var c=
a.html,e=V('[data-id="afb-content"]');if(e&&c){var h=V('[data-id="afb-sponsored"]');h&&(h.style.display="none");e.innerHTML=c}var k=a.script;if(k){var p=D().createElement("script");p.type="text/javascript";p.innerHTML=k;V().appendChild(p)}}catch(r){la(),d(Error("setHtml or setScript failed"))}g("success")},onError:function(){la();d(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},za=function(b){var f;if(b){switch(null===(f=b.pastActivity)||
void 0===f?void 0:f.toUpperCase()){case "STORE_ONLY":f=1;break;case "AMAZON_AND_OTHER":f=3;break;case "AMAZON_ONLY":f=2;break;default:f=0}return m.__assign(m.__assign({},b),{pastActivity:f})}},O;(function(b){b.BETA="beta";b.GAMMA="gamma";b.PROD="prod"})(O||(O={}));var Aa=function(){function b(){}b.getStage=function(){var f=D().defaultView;return(f=f&&f.location&&f.location.hostname)?"localhost"===f||"mix.corp.amazon.com"===f||"development.amazon.com"===f||/^[a-z]{2}-development\.amazon\.com$/.test(f)?
O.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(f)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(f)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(f)?O.GAMMA:O.PROD:O.PROD};return b}(),z=function(){function b(){}b.eventListeners={};b.addEventListener=function(f,g,d,a){b.setupListenerIfItDoesntExist(f,g);b.addCallbackWithPriority(f,g,d,a)};b.removeEventListener=function(f,g,d,a){b.removeCallbackWithPriority(f,g,d,a)&&b.removeListenerIfNoLongerNeeded(f,g)};b.removeListenerIfNoLongerNeeded=function(f,g){0===
b.eventListeners[f][g].listeners.length&&(f.removeEventListener(g,b.eventListeners[f][g].generatedCallback),delete b.eventListeners[f][g],Object.keys(b.eventListeners[f]).length&&delete b.eventListeners[f])};b.removeCallbackWithPriority=function(f,g,d,a){if(!b.eventListeners[f]||!b.eventListeners[f][g])return!1;b.eventListeners[f][g].listeners=b.eventListeners[f][g].listeners.filter(function(c){return c.priority!==d||c.callback!==a});return!0};b.setupListenerIfItDoesntExist=function(f,g){b.eventListeners[f]||
(b.eventListeners[f]={});b.eventListeners[f][g]||(b.eventListeners[f][g]={generatedCallback:b.generateCallback(f,g),listeners:[]},f.addEventListener(g,b.eventListeners[f][g].generatedCallback))};b.addCallbackWithPriority=function(f,g,d,a){b.eventListeners[f][g].listeners.push({callback:a,priority:d});b.eventListeners[f][g].listeners.sort(function(c,e){return c.priority-e.priority})};b.generateCallback=function(f,g){return function(d){b.eventListeners[f][g].listeners.forEach(function(a){a.callback&&
a.callback(d)})}};return b}(),xb=["messageId","timestamp"],yb=function(b){var f=function(){},g=function(){var a=function(){if(b.XDomainRequest){var c=new b.XDomainRequest;c.onerror=f;c.ontimeout=f;c.onprogress=f;c.onload=f;c.timeout=0;return c}if(b.XMLHttpRequest){c=new b.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{isSupported:!0,send:function(c,e){if(e&&c){var h=a();if(!h)throw"";h.open("POST",c,!0);h.setRequestHeader&&h.setRequestHeader("Content-type","text/plain");
h.send(e)}}}}(),d=function(){return{isSupported:!!b.navigator.sendBeacon,send:function(a,c){if(a&&c&&!b.navigator.sendBeacon(a,c))throw"";}}}();return{ajaxClient:g,beaconClient:d}},zb=function(){return function(b,f){var g=this;this.flush=function(a){void 0===a&&(a=!1);g.eventsQueue.length&&(a||!1!==g.browserWindow.navigator.onLine)&&(a=g.eventsQueue.length,g.sendWithPriority(g.transportationClient.beaconClient,g.transportationClient.ajaxClient),g.resetBatch(),g.ueCount("EventsSent",a))};this.processEvent=
function(a,c){void 0===c&&(c={n:1});var e=g.unloadHandlerCalled=!1;g.isValidAPICall(a)&&(e=g.addEvent(a,c));e?g.ueCount("ClientEventsSuccess"):g.ueCount("ClientEventsFailed");return e};this.getEventQueueCount=function(){return g.eventsQueue.length};this.buildCompressor=function(){var a=function(k){return k.length>("#"+g.dictionaryIndex).length||"#"===k.charAt(0)},c=function(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||Infinity===k)&&a(k.toString());case "boolean":break;case "string":return a(k);
default:return!0}return!1},e=function(k){g.eventsDictionary[k]="#"+g.dictionaryIndex++;g.reverseEventsDictionary[g.eventsDictionary[k]]=k;return g.eventsDictionary[k]},h=function(k){if(c(k)){var p=0;k instanceof Array?p=2:k instanceof Function?p=null:k instanceof Object&&(p=1);switch(p){case 0:return g.eventsDictionary[k]?g.eventsDictionary[k]:e(k);case 2:var r=[];for(p=0;p<k.length;p++)r[p]=h(k[p]);return r;case 1:p={};for(r in k)Object.prototype.hasOwnProperty.call(k,r)&&(p[g.eventsDictionary[r]?
g.eventsDictionary[r]:e(r)]=-1===xb.indexOf(r)?h(k[r]):k[r]);return p}}return k};return{buildPOSTObject:function(){return g.stringify({cs:{dct:g.reverseEventsDictionary},events:g.eventsQueue})},compressData:h}};this.onBeforeUnload=function(){!0!==g.unloadHandlerCalled&&(g.flush(),g.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(c){return null}};this.resetBatch=function(){g.eventsQueue=[];g.eventsDictionary={};g.reverseEventsDictionary={};g.dictionaryIndex=0;
g.batchSize=0;g.lowPriorityTimer=0;g.highPriorityTimer=0};this.sendWithClient=function(a){if(null==g.endpoint||""===g.endpoint)g.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var c=g.compressor.buildPOSTObject();return a.send(g.endpoint,c)}throw"";}};this.sendWithPriority=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<a.length;c++){var e=a[c];try{return g.sendWithClient(e)}catch(h){}}return null};this.startHighPriorityQueueTimer=function(){0===g.highPriorityFlushInterval?
g.flush():g.highPriorityTimer||(g.highPriorityTimer=setTimeout(g.flush,g.highPriorityFlushInterval,g,!1))};this.startLowPriorityQueueTimer=function(){g.lowPriorityTimer||(g.lowPriorityTimer=setTimeout(g.flush,g.lowPriorityFlushInterval,g,!1))};this.generateMessageId=function(a,c){return a+"-"+c+"-"+g.eventSequence};this.getCurrentISODate=function(){var a=new Date,c=function(e){return 10>e?"0"+e:e};return"function"===typeof Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+c(a.getUTCMonth()+
1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=g.getCurrentISODate();a.sequence=g.eventSequence;a.messageId=g.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?g.startHighPriorityQueueTimer():g.startLowPriorityQueueTimer()};this.encodeEvent=function(a,c,e){c=c.length;(499===g.eventsQueue.length||
524288<g.batchSize+c)&&g.flush(!0);g.batchSize+=c;a={data:g.compressor.compressData(a)};g.eventsQueue.push(a);g.startTimers(e)};this.addEvent=function(a,c){g.decorateEvent(a);var e=g.stringify(a);return e?(g.encodeEvent(a,e,c),!0):!1};this.isValidAPIParam=function(a,c){return a&&-1<a.constructor.toString().indexOf(c)};this.isMaxCallsReached=function(){g.eventSequence++;1E3<g.eventSequence&&g.ueCount("SushiClientMaxCallsReached");return 1E3<g.eventSequence};this.isValidAPICall=function(a){return!g.isMaxCallsReached()&&
g.isValidAPIParam(a,"Object")};this.ueCount=function(a,c){try{var e=0===c?0:c||(A.count(g.metricsTag+":"+a)||0)+1;A.count(g.metricsTag+":"+a,e);return e}catch(h){return wa.log("SushiClient.ueCount error: "+h,"ERROR"),0}};this.browserWindow=D().defaultView;this.endpoint=b;this.metricsTag=f;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=
1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=yb(this.browserWindow);this.compressor=this.buildCompressor();z.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);z.addEventListener(D(),"visibilitychange",100,this.onBeforeUnload);z.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);z.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||(this.browserWindow.app={});var d=this.browserWindow.app.willDisappear;
this.browserWindow.app.willDisappear=function(){d&&d();g.onBeforeUnload()}}}(),G;(function(b){b.VIEWED="VIEWED";b.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";b.FIRST_QUARTILE="FIRST_QUARTILE";b.MIDPOINT="MIDPOINT";b.THIRD_QUARTILE="THIRD_QUARTILE";b.COMPLETE="COMPLETE";b.UNMUTE="UNMUTE"})(G||(G={}));var Y;(function(b){b.ICON_TAP="IconTap";b.VIDEO_OFF_SCREEN="VideoOffScreen";b.INHERIT="Inherit";b.WEBKIT_MUTED="WebkitMuted"})(Y||(Y={}));var Q;(function(b){b.ICON_TAP="IconTap";b.VIDEO_OFF_SCREEN="VideoOffScreen";
b.INHERIT="Inherit";b.DEFAULT_ON="DefaultOn"})(Q||(Q={}));var Ba;(function(b){b.SINGLE_PAGE="SINGLE_PAGE";b.CROSS_PAGE="CROSS_PAGE"})(Ba||(Ba={}));var Ca;(function(b){b.CONTENT_HASH="CONTENT_HASH";b.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(Ca||(Ca={}));var n;(function(b){b.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";b.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";b.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";b.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";
b.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";b.BACKGROUND_CLICKED="BackgroundClicked";b.BRAND_LOGO_CLICKED="BrandLogoClicked";b.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";b.CARD_ITEM_RECEIVED="CardItemReceived";b.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";b.CAPTIONS_ENABLED="CaptionsEnabled";b.CAPTIONS_DISABLED="CaptionsDisabled";b.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";b.DUPE="Dupe";b.DUPE_BY_ADVID_CAMPAIGNID="DupeByAdvIdCampaignId";b.DUPE_BY_CONTENT_HASH="DupeByContentHash";
b.HEADLINE_CLICKED="HeadlineClicked";b.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";b.IMMERSIVE_VIDEO_LOADED="ImmersiveVideoLoaded";b.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";b.MISSING_BRAND_ELEMENT="MissingBrandElement";b.MISSING_PRODUCT_ELEMENT="MissingProductElement";b.MISSING_PRODUCT_ELEMENTS="MissingProductElements";b.MISSING_VIDEO_ELEMENT="MissingVideoElement";b.NO_AD_ERROR="NoAdError";b.NO_VIDEO_SRC_ON_ELEMENT="NoVideoSrcOnElement";b.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";
b.PLAYBACK_COMPLETED="PlaybackCompleted";b.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";b.PRODUCT_CLICKED="ProductClicked";b.PRODUCT_RECEIVED="ProductReceived";b.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";b.MULTI_PRODUCT_COLLECTION="MultiProductCollection";b.TIME_TO_FIRST_FRAME="TimeToFirstFrame";b.VIDEO_ABORTED="VideoAborted";b.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";b.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";b.VIDEO_CLICKED="VideoClicked";b.VIDEO_DURATION_PLAYED=
"VideoDurationPlayed";b.VIDEO_OFF_SCREEN="VideoOffScreen";b.VIDEO_ON_SCREEN="VideoOnScreen";b.VIDEO_PAUSED="VideoPaused";b.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";b.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";b.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";b.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";b.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";b.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";b.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";b.VIDEO_READY_FOR_PLAYBACK=
"VideoReadyForPlayback";b.VIDEO_SOUND_OFF="VideoSoundOff";b.VIDEO_SOUND_ON="VideoSoundOn";b.VIDEO_SUSPENDED="VideoSuspended";b.VIDEO_VIEW="VideoView";b.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";b.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";b.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";b.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";b.VM_VIDEO_MIDPOINT="ViewMetricsVideoMidpoint";b.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";b.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";
b.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";b.VM_POST_FAILURE="ViewMetricsPostFailure";b.WIDGET_ON_SCREEN="WidgetOnScreen";b.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";b.PDP_RENDERED_AS_PC="PDPRenderedAsPC"})(n||(n={}));var l;(function(b){b.APP_VERSION="appVersion";b.ADVERTISER_ID="advertiserId";b.AUTO_SCROLLED="autoScrolled";b.CAMPAIGN_ID="campaignId";b.CAROUSEL_ITEM_INDEX="carouselItemIndex";b.CAROUSEL_PAGE_NUMBER="carouselPageNumber";b.CC_TOGGLE_CAUSE="ccToggleCause";b.CC_MANDATORY="ccMandatory";
b.CC_SRC="ccSrc";b.CLIENT_ID="clientId";b.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";b.CURRENT_PAGE_URL="currentPageUrl";b.DEVICE_ENV="deviceEnv";b.DEVICE_MAKE="deviceMake";b.DEVICE_MODEL="deviceModel";b.DEVICE_OS="deviceOs";b.DEVICE_PLATFORM_VERSION="devicePlatformVersion";b.DEVICE_TYPE="deviceType";b.DROPPED_FRAMES="droppedFrames";b.ERROR_CODE="errorCode";b.ERROR_MESSAGE="errorMessage";b.EVENT_TYPE="eventType";b.HEADLINE="headline";b.IMAGE_URL="imageUrl";b.LANGUAGE="language";
b.LINK_URL="linkUrl";b.LOAD_TIME_MS="loadTimeMs";b.LOGIC="logic";b.MARKETPLACE_ID="marketplaceId";b.METRICS_IDENTIFIER="metricsIdentifier";b.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";b.NETWORK_TYPE="networkType";b.NUMBER_OF_ADS="numberOfAds";b.PAGE_NUMBER="pageNumber";b.PAGE_TYPE="pageType";b.PERCENT_DOWNLOADED="percentDownloaded";b.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";b.PRODUCT_INDEX="productIndex";b.PRODUCT_ASIN="asin";b.TWISTER_VARIATIONS_REQUESTED="twisterVariationsRequested";
b.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";b.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";b.TWISTER_VARIATIONS_CHOSEN="twisterVariationsChosen";b.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";b.REASON="reason";b.RETRY_COUNT="retryCount";b.SEARCH_QUERY="searchQuery";b.SOUND_TOGGLE_METHOD="soundToggleMethod";b.STAGE="stage";b.STATUS_CODE="statusCode";b.STORE_CTA="storeCta";b.TIME_ON_SCREEN_MS="timeOnScreenMs";b.USER_AGENT=
"userAgent";b.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";b.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";b.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";b.VIDEO_SRC="videoSrc";b.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";b.VIDEO_TYPE="videoType";b.WAS_BUFFERING="wasBuffering";b.WEBLABS="weblabs";b.WIDGET_GROUP_ID="widgetGroupId";b.WIDGET_INDEX="widgetIndex";b.WIDGET_TYPE="widgetType";b.VIEW_METRICS_FAILURE="viewMetricsFailure";b.MULTI_ASIN_ADS_COUNT="MultiAsinAdsCount"})(l||(l={}));
var Da={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0,shouldLogAdUnitViewMetrics:!1},Ab=function(){return function(b,f,g){var d=this;void 0===g&&(g=Da);this.reportPDPRenderedAsPC=function(a){a=d.newEvent(n.PDP_RENDERED_AS_PC,a);d.recordEvent(a)};this.setClientMetricsContext=function(a){d.clientMetricsContext=a};this.reportWidgetOnScreen=function(){var a=d.newEvent(n.WIDGET_ON_SCREEN,d.resetVideoAdAttributes());d.recordEvent(a)};this.reportResponseReceived=function(a){var c=d.newEvent(n.ACE_VIDEO_RESPONSE_RECEIVED,
d.resetVideoAdAttributes());c[l.NUMBER_OF_ADS]=null!==a&&void 0!==a?a:1;d.recordEvent(c)};this.reportNumAsins=function(a){var c=d.newEvent(n.MULTI_ASIN_ADS_RECEIVED);c[l.MULTI_ASIN_ADS_COUNT]=a;d.recordEvent(c)};this.reportNoAdError=function(){var a=d.newEvent(n.NO_AD_ERROR,d.resetVideoAdAttributes());d.recordEvent(a)};this.reportNumOfAdsLessThanMinRequirement=function(){var a=d.newEvent(n.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,d.resetVideoAdAttributes());d.recordEvent(a)};this.reportAdFeedbackLoadFailedFromErr=
function(a){var c=d.newEvent(n.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,d.resetVideoAdAttributes());c[l.ERROR_MESSAGE]=a;d.recordEvent(c)};this.reportAdFeedbackLoadSucceeded=function(){var a=d.newEvent(n.AD_FEEDBACK_LOAD_SUCCEEDED,d.resetVideoAdAttributes());d.recordEvent(a)};this.reportAdFeedbackPopoverOpened=function(){var a=d.newEvent(n.AD_FEEDBACK_LOAD_POPOVER_OPENED,d.resetVideoAdAttributes());d.recordEvent(a)};this.reportImmersiveVideoLoaded=function(a){a=d.newEvent(n.IMMERSIVE_VIDEO_LOADED,a);d.recordEvent(a)};
this.reportImmersiveVideoFailed=function(a,c){c=d.newEvent(n.IMMERSIVE_VIDEO_FAILED,c);c[l.ERROR_MESSAGE]=a;d.recordEvent(c)};this.reportVideoReadyForPlayback=function(a,c,e,h,k){h=d.newEvent(n.VIDEO_READY_FOR_PLAYBACK,h);h[l.LOAD_TIME_MS]=a;h[l.RETRY_COUNT]=c;h[l.PERCENT_DOWNLOADED]=e;h[l.VIDEO_TOTAL_LENGTH_MS]=k;d.recordEvent(h)};this.reportVideoPlaybackInitiated=function(a,c){c=d.newEvent(n.VIDEO_PLAYBACK_INITIATED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportVideoPlaybackStarted=
function(a,c,e,h){h=d.newEvent(n.VIDEO_PLAYBACK_STARTED,h);h[l.VIDEO_CURRENT_TIME_MS]=a;h[l.PERCENT_DOWNLOADED]=c;h[l.DROPPED_FRAMES]=e;d.recordEvent(h)};this.reportTimeToFirstFrame=function(a,c,e,h){h=d.newEvent(n.TIME_TO_FIRST_FRAME,h);h[l.LOAD_TIME_MS]=a;h[l.PERCENT_DOWNLOADED]=c;h[l.DROPPED_FRAMES]=e;d.recordEvent(h)};this.reportVideoBufferingStarted=function(a,c,e,h){h=d.newEvent(n.VIDEO_BUFFERING_STARTED,h);h[l.VIDEO_CURRENT_TIME_MS]=a;h[l.PERCENT_DOWNLOADED]=c;h[l.DROPPED_FRAMES]=e;d.recordEvent(h)};
this.reportVideoBufferingEnded=function(a,c,e,h){h=d.newEvent(n.VIDEO_BUFFERING_ENDED,h);h[l.VIDEO_CURRENT_TIME_MS]=a;h[l.PERCENT_DOWNLOADED]=c;h[l.DROPPED_FRAMES]=e;d.recordEvent(h)};this.reportVideoPlaybackFailure=function(a,c,e,h){h=d.newEvent(n.VIDEO_PLAYBACK_FAILURE,h);h[l.VIDEO_CURRENT_TIME_MS]=a;h[l.ERROR_MESSAGE]=c;h[l.ERROR_CODE]=e;d.recordEvent(h)};this.reportVideoDurationPlayed=function(a,c,e,h){h=d.newEvent(n.VIDEO_DURATION_PLAYED,h);h[l.VIDEO_BOUNDARY_CROSSED_TIME_MS]=a;h[l.PERCENT_DOWNLOADED]=
c;h[l.DROPPED_FRAMES]=e;d.recordEvent(h)};this.reportPlaybackCompleted=function(a,c,e){e=d.newEvent(n.PLAYBACK_COMPLETED,e);e[l.VIDEO_CURRENT_TIME_MS]=a;e[l.DROPPED_FRAMES]=c;d.recordEvent(e)};this.reportVideoOnScreen=function(a,c){c=d.newEvent(n.VIDEO_ON_SCREEN,c);c[l.PERCENT_DOWNLOADED]=a;d.recordEvent(c)};this.reportVideoOffScreen=function(a,c,e,h){h=d.newEvent(n.VIDEO_OFF_SCREEN,h);h[l.TIME_ON_SCREEN_MS]=a;h[l.WAS_BUFFERING]=c;h[l.VIDEO_CURRENT_TIME_MS]=e;d.recordEvent(h)};this.reportVideoView=
function(a,c,e){void 0===c&&(c=!1);e=d.newEvent(n.VIDEO_VIEW,e);e[l.CONTINUOUS_PLAYBACK_DURATION_MS]=a;d.recordEvent(e);c&&d.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(a,c){c=d.newEvent(n.VIDEO_PAUSED_INITIATED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportVideoPaused=function(a,c,e,h){h=d.newEvent(n.VIDEO_PAUSED,h);h[l.VIDEO_CURRENT_TIME_MS]=a;h[l.PERCENT_DOWNLOADED]=c;h[l.DROPPED_FRAMES]=e;d.recordEvent(h)};this.reportVideoSoundOn=function(a,c,e){e=d.newEvent(n.VIDEO_SOUND_ON,
e);e[l.VIDEO_CURRENT_TIME_MS]=a;e[l.SOUND_TOGGLE_METHOD]=c;d.recordEvent(e)};this.reportVideoSoundOff=function(a,c,e){e=d.newEvent(n.VIDEO_SOUND_OFF,e);e[l.VIDEO_CURRENT_TIME_MS]=a;e[l.SOUND_TOGGLE_METHOD]=c;d.recordEvent(e)};this.reportCaptionsOn=function(a,c,e,h){c=d.newEvent(n.CAPTIONS_ENABLED,c);c[l.LANGUAGE]=e;c[l.CC_MANDATORY]=h;c[l.CC_TOGGLE_CAUSE]=a;d.recordEvent(c)};this.reportCaptionsOff=function(a,c,e,h){c=d.newEvent(n.CAPTIONS_DISABLED,c);c[l.LANGUAGE]=e;c[l.CC_MANDATORY]=h;c[l.CC_TOGGLE_CAUSE]=
a;d.recordEvent(c)};this.reportCaptionsLoadFailure=function(a){var c=d.newEvent(n.CAPTIONS_LOAD_FAILURE,a);c[l.CC_SRC]=a.ccSrc;d.recordEvent(c)};this.reportDupe=function(a,c,e){a=d.newEvent(n.DUPE,a);a[l.LOGIC]=c;a[l.REASON]=e;d.recordEvent(a)};this.reportDupeByCampaignAndAdvertiserId=function(a){a=d.newEvent(n.DUPE_BY_ADVID_CAMPAIGNID,a);d.recordEvent(a)};this.reportDupeByContentHash=function(a){a=d.newEvent(n.DUPE_BY_CONTENT_HASH,a);d.recordEvent(a)};this.reportVideoClicked=function(a,c){c=d.newEvent(n.VIDEO_CLICKED,
c,d.getDynamicMetricsAttributes());c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportProductClicked=function(a,c,e){c=d.newEvent(n.PRODUCT_CLICKED,c,d.getDynamicMetricsAttributes());c[l.VIDEO_CURRENT_TIME_MS]=a;e&&(a=e.productIndex,c[l.PRODUCT_ASIN]=e.asin,c[l.PRODUCT_INDEX]=a);d.recordEvent(c)};this.reportBackgroundClicked=function(a,c){c=d.newEvent(n.BACKGROUND_CLICKED,c,d.getDynamicMetricsAttributes());c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportProductReceived=function(a,
c,e){c=d.newEvent(n.PRODUCT_RECEIVED,c,d.getDynamicMetricsAttributes());c[l.VIDEO_CURRENT_TIME_MS]=a;e&&(c[l.PRODUCT_ASIN]=e.asin);d.recordEvent(c)};this.reportProductTwisterVariations=function(a,c){a=d.newEvent(n.PRODUCT_TWISTER_VARIATION,a);if(c&&c.twisterVariationProperties){var e=c.twisterVariationProperties;c=e.twisterVariationsRequested;var h=e.twisterVariationsRequestSucceeded,k=e.twisterVariationDetailsRequested,p=e.numberOfTwisterVariationsAvailable;e=e.asinForTwisterChosen;a[l.TWISTER_VARIATIONS_REQUESTED]=
null!==c&&void 0!==c?c:!1;a[l.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=null!==h&&void 0!==h?h:!1;a[l.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=p;a[l.TWISTER_VARIATIONS_DETAIL_REQUESTED]=null!==k&&void 0!==k?k:!1;a[l.TWISTER_VARIATIONS_CHOSEN]=e}d.recordEvent(a)};this.reportProductAttributes=function(a,c){a=d.newEvent(n.MULTI_PRODUCT_COLLECTION,a);if(c){var e=c.productUrl;a[l.PRODUCT_ASIN]=c.asin;a[l.LINK_URL]=e}d.recordEvent(a)};this.reportPlaybackFailedToStartAfterPlay=function(a){a=d.newEvent(n.PLAYBACK_FAILED_TO_START_AFTER_PLAY,
a);d.recordEvent(a)};this.reportAudioToggleIconDisplayed=function(a){a=d.newEvent(n.AUDIO_TOGGLE_ICON_DISPLAYED,a);d.recordEvent(a)};this.reportVideoAborted=function(a,c){c=d.newEvent(n.VIDEO_ABORTED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportVideoSuspended=function(a,c){c=d.newEvent(n.VIDEO_SUSPENDED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportVideoPlayPromiseRejected=function(a,c){c=d.newEvent(n.VIDEO_PLAY_PROMISE_REJECTED,c);c[l.ERROR_MESSAGE]=a;d.recordEvent(c)};
this.reportVideoPlayPromiseNotSupported=function(a){a=d.newEvent(n.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,a);d.recordEvent(a)};this.reportMissingVideoElement=function(a){a=d.newEvent(n.MISSING_VIDEO_ELEMENT,a);d.recordEvent(a)};this.reportMissingProductElement=function(a){a=d.newEvent(n.MISSING_PRODUCT_ELEMENT,a);d.recordEvent(a)};this.reportMissingProductElements=function(a){a=d.newEvent(n.MISSING_PRODUCT_ELEMENTS,a);d.recordEvent(a)};this.reportMissingBackgroundElement=function(a){a=d.newEvent(n.MISSING_BACKGROUND_ELEMENT,
a);d.recordEvent(a)};this.reportMissingBrandElement=function(a){a=d.newEvent(n.MISSING_BRAND_ELEMENT,a);d.recordEvent(a)};this.reportBrandCtaLinkClicked=function(a,c){c=d.newEvent(n.BRAND_CTA_LINK_CLICKED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportBrandLogoClicked=function(a,c){c=d.newEvent(n.BRAND_LOGO_CLICKED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};this.reportHeadlineClicked=function(a,c){c=d.newEvent(n.HEADLINE_CLICKED,c);c[l.VIDEO_CURRENT_TIME_MS]=a;d.recordEvent(c)};
this.reportCarouselPageChanged=function(a,c,e){void 0===e&&(e=!1);var h=d.newEvent(n.CAROUSEL_PAGE_CHANGED);h[l.CAROUSEL_PAGE_NUMBER]=a;h[l.PREV_CAROUSEL_PAGE_NUMBER]=c;h[l.AUTO_SCROLLED]=e;d.recordEvent(h)};this.reportCardItemReceived=function(a,c){c=d.newEvent(n.CARD_ITEM_RECEIVED,c);c[l.CAROUSEL_PAGE_NUMBER]=a;d.recordEvent(c)};this.reportVideoPlayButtonTriggered=function(a,c){c=d.newEvent(n.VIDEO_PLAY_BUTTON_TRIGGERED,c);c[l.CAROUSEL_ITEM_INDEX]=a;d.recordEvent(c)};this.reportViewMetricsAdUnitViewed=
function(a){if(d.getShouldLogViewMetrics()&&d.getShouldLogAdUnitViewMetrics()){var c=d.newEvent(n.VM_AD_UNIT_VIEWED,a);d.recordEvent(c);d.emitViewMetrics(G.VIEWED,a)}};this.reportViewMetricsVideoViewed=function(a){if(d.getShouldLogViewMetrics()){var c=d.newEvent(n.VM_VIDEO_VIEWED,a);d.recordEvent(c);d.getShouldLogAdUnitViewMetrics()||d.emitViewMetrics(G.VIEWED,a)}};this.reportViewMetricsVideoProgressFiveSeconds=function(a){if(d.getShouldLogViewMetrics()){var c=d.newEvent(n.VM_VIDEO_PROGRESS_FIVE_SECONDS,
a);d.recordEvent(c);d.emitViewMetrics(G.PROGRESS_FIVE_SECONDS,a)}};this.reportViewMetricsVideoFirstQuartile=function(a){if(d.getShouldLogViewMetrics()){var c=d.newEvent(n.VM_VIDEO_FIRST_QUARTILE,a);d.recordEvent(c);d.emitViewMetrics(G.FIRST_QUARTILE,a)}};this.reportViewMetricsVideoMidpoint=function(a){if(d.getShouldLogViewMetrics()){var c=d.newEvent(n.VM_VIDEO_MIDPOINT,a);d.recordEvent(c);d.emitViewMetrics(G.MIDPOINT,a)}};this.reportViewMetricsVideoThirdQuartile=function(a){if(d.getShouldLogViewMetrics()){var c=
d.newEvent(n.VM_VIDEO_THIRD_QUARTILE,a);d.recordEvent(c);d.emitViewMetrics(G.THIRD_QUARTILE,a)}};this.reportViewMetricsVideoComplete=function(a){if(d.getShouldLogViewMetrics()){var c=d.newEvent(n.VM_VIDEO_COMPLETE,a);d.recordEvent(c);d.emitViewMetrics(G.COMPLETE,a)}};this.reportViewMetricsVideoUnmute=function(a){if(d.getShouldLogViewMetrics()){var c=d.newEvent(n.VM_VIDEO_UNMUTE,a);d.recordEvent(c);d.emitViewMetrics(G.UNMUTE,a)}};this.reportViewMetricsPostRequestFailure=function(a,c,e){e=d.newEvent(n.VM_POST_FAILURE,
e);e[l.VIEW_METRICS_FAILURE]=a;e[l.ERROR_MESSAGE]=c;d.recordEvent(e)};this.emitViewMetrics=function(a,c){if(d.getShouldBillViewMetrics()){var e=c.instrumentationPixelUrl;if(void 0===e||""===e)d.reportViewMetricsPostRequestFailure(a,"instrumentationPixelUrl is empty or undefined",c);else{var h=JSON.stringify({v:{def:"iab",event:a},programType:"SBV"});e="/"===e.substr(-1)?e+"v/":e+"/v/";sb({onError:function(k){d.reportViewMetricsPostRequestFailure(a,k.message,c)},payload:h,url:e+encodeURI(h)})}}};this.getShouldLogViewMetrics=
function(){return d.viewMetricOptions.shouldLogViewMetrics};this.getShouldLogAdUnitViewMetrics=function(){return d.viewMetricOptions.shouldLogAdUnitViewMetrics};this.getShouldBillViewMetrics=function(){return d.viewMetricOptions.shouldLogViewMetrics&&d.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=function(a){d.sushiClient.processEvent(a)};this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,
instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var a,c;return null===(c=null===(a=d.clientMetricsContext)||void 0===a?void 0:a.getDynamicMetricsAttributes)||void 0===c?void 0:c.call(a)};this.newEvent=function(a,c,e){void 0===e&&(e={});c=m.__assign(m.__assign(m.__assign({},d.defaultAttributes),c),e);c[l.EVENT_TYPE]=a;c[l.METRICS_SEQUENCE_NUMBER]=d.metricsSequenceNumber++;c[l.NETWORK_TYPE]=
navigator&&navigator.connection&&navigator.connection.type;return c};this.browserWindow=D().defaultView;this.metricsSequenceNumber=0;this.sushiClient=new zb(f,"SBVClientMetrics");this.defaultAttributes=m.__assign({},b);this.defaultAttributes[l.USER_AGENT]=navigator.userAgent;this.viewMetricOptions=m.__assign(m.__assign({},Da),g);(f=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&(this.defaultAttributes[l.CURRENT_PAGE_URL]=f);b.pageNumber&&(b=parseInt(b.pageNumber,
10),isNaN(b)||(this.defaultAttributes[l.PAGE_NUMBER]=b))}}(),Bb=function(b){var f=Aa.getStage();switch(b){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+f+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+
f+".fe"}},Cb=["motorola edge","Moto"],Db=function(){var b=t["default"].capabilities.android?"android":t["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===b&&Cb.forEach(function(f){navigator.userAgent.includes(f)&&(b="android")});return"desktop"===Ea()?"unrecognized":b},Ea=function(){return t["default"].capabilities.mobile?"mobile":t["default"].capabilities.tablet?"tablet":"desktop"},R;(R||(R={})).SEARCH_GRID="sbv-transition-search-grid";var E;(function(b){b.SEARCH_GRID="sbv-search-grid";
b.SINGLE_ELEMENT="single-element"})(E||(E={}));var Eb=t["default"].$,Hb=function(){function b(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}b.prototype.register=function(){U["default"].display[E.SEARCH_GRID]||ja["default"].registerStrategy("display",E.SEARCH_GRID,this.strategy)};b.prototype.init=function(f){var g=f.getAttr(q["default"].FIRST_VISIBLE_ITEM);f.setAttr(q["default"].MIN_GUTTER,0);f.setAttr("currentGutter",0);this.repaint(f);1<g&&(g=Math.ceil(g/f.getAttr(q["default"].PAGE_SIZE)),
f.gotoPage(g));Fb(f)};b.prototype.repaint=function(f){var g=f.getDimensions().viewport.width,d=f.dom.$carousel.children("li").get(0).getBoundingClientRect();d=d.width?d.width:d.right-d.left;var a=Gb(f,g,d);var c=f.dom.$carousel;var e=c.children("li"),h=e.length,k=f.getAttr(q["default"].PAGE_SIZE),p=f.getAttr(q["default"].SET_SIZE);e=e.first().outerWidth(!0);g=k>=p?g:h*e;c.css("width",g+"px");g={carousel:{outerWidth:c.outerWidth(),width:g},items:[]};for(c=0;c<h;c++)g.items.push({outerWidth:e,width:d});
f.updateDimensionsCache(g);f.gotoIndex(a,{animationDuration:0,ignorePause:!0});f.triggerEvent("repaint")};b.prototype.resize=function(f,g){g.viewport&&void 0!==g.viewport.width&&this.repaint(f)};b.prototype.getStrategy=function(){return this.strategy};return b}(),Fb=function(b){b.onChange(q["default"].PAGE_NUMBER,function(){b.getAttr(q["default"].HIDE_OFF_SCREEN)&&b.dom.$carousel.children("li").css("visibility","")});b.onChange(q["default"].ANIMATING,function(f){if(!f&&b.getAttr(q["default"].HIDE_OFF_SCREEN)){var g=
b.getAttr(q["default"].FIRST_VISIBLE_ITEM)-1;var d=g+b.getAttr(q["default"].PAGE_SIZE)-1;b.dom.$carousel.children("li").each(function(a,c){a=a>=g&&a<=d;Eb(c).css("visibility",a?"":"hidden")})}})},Gb=function(b,f,g){var d=b.getAttr(q["default"].TOTAL_PAGES),a=b.getAttr(q["default"].PAGE_NUMBER),c=b.getAttr(q["default"].FIRST_VISIBLE_ITEM),e=b.getAttr(q["default"].HIDE_OFF_SCREEN),h=b.dom.$carousel.children("li");f=Ib(b,f,g);var k=(a-1)*f+1;b.setAttr(q["default"].PAGE_SIZE,f);a>d?(c=(d-1)*f+1,b.setAttr(q["default"].PAGE_NUMBER,
d),b.setAttr(q["default"].FIRST_VISIBLE_ITEM,c)):c!==k&&(d=Math.ceil(c/f),c=(d-1)*f+1,b.setAttr(q["default"].PAGE_NUMBER,d),b.setAttr(q["default"].FIRST_VISIBLE_ITEM,c));var p=c-1;var r=p+f-1;h.each(function(v,u){u.style.visibility=!e||v>=p&&v<=r?"":"hidden";u.style.width=g+"px"});return c},Ib=function(b,f,g){b=0;if(0<g)for(;-.5<f;)b++,f-=g;0>f&&b--;return t["default"].isFiniteNumber(b)&&0<b?b:1},Jb=function(){return function(){var b=this;this.updateRepaint=function(f){f.repaint=function(g){var d=
g.getAttr("minimum_gutter_width"),a=g.getAttr("set_size"),c=g.dom.$carousel.children("li"),e=c.width();e-=2*d;c.css({width:e+"px",margin:"0 "+d+"px"});d=e+2*d;c=d*a;g.dom.$carousel.width(c);for(c={carousel:{width:c},items:[]};a--;)c.items[a]={width:e,outerWidth:d};g.updateDimensionsCache(c);g.gotoIndex(g.getAttr("firstVisibleItem"),{animationDuration:0,ignorePause:!0});g.triggerEvent("repaint")}};this.getStrategy=function(){return b.strategy};this.register=function(){U["default"].display[E.SINGLE_ELEMENT]||
ja["default"].registerStrategy("display",E.SINGLE_ELEMENT,b.strategy)};this.strategy=t["default"].copy(U["default"].display.single);this.updateRepaint(this.strategy)}}(),Kb=function(){function b(){}b.registerStrategy=function(f){switch(f){case E.SEARCH_GRID:(new Hb).register();break;case E.SINGLE_ELEMENT:(new Jb).register();break;default:throw Error("Invalid carousel Strategy type");}};return b}(),Nb=function(){return function(){var b=this;this.register=function(){U["default"].transition[R.SEARCH_GRID]||
ja["default"].registerStrategy("transition",R.SEARCH_GRID,b.strategy)};this.gotoPage=function(f,g,d){var a=f.getAttr(q["default"].TOTAL_PAGES),c=f.getAttr(q["default"].CIRCULAR),e=f.getAttr(q["default"].PAGE_SIZE),h=f.getAttr(q["default"].SET_SIZE),k=e*(g-1)+1;d=d||{};Fa(f,d);0<g&&g<=a&&f.setAttr(q["default"].PAGE_NUMBER,g);!c&&1>g?(g=1,d.animationDuration=NaN):!c&&g>a&&(g=a,d.animationDuration=Math.pow(f.getAttr(q["default"].ANIMATION_SPEED),f.getAttr(q["default"].SPRINGINESS)));g===a&&(k=Math.min(k,
h-e+1));b.gotoIndex(f,k,d)};this.gotoIndex=function(f,g,d){d=d||{};Fa(f,d);var a=f.getAttr(q["default"].CIRCULAR)&&!f.getAttr(q["default"].CURRENTLY_WRAPPING);var c=d.callback;var e=null;var h=f.getViewportWidth();Lb(f,g);f.setAttr(q["default"].FIRST_VISIBLE_ITEM,g);if(1>g){if(a){e=-h;var k=function(){c&&c();b.wrapToLast(f)}}}else g>f.getAttr(q["default"].SET_SIZE)?a&&(e=f.getAttr(q["default"].CURRENT_PIXEL)+h,k=function(){c&&c();b.wrapToFirst(f)}):e=f.getItemOffset(g);Mb(f,d,k,c);null!==e&&b.strategy.gotoPixel(f,
e,d)};this.getStrategy=function(){return b.strategy};this.strategy=t["default"].copy(U["default"].transition.slideHorizontal);this.strategy.gotoPage=this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),Lb=function(b,f){var g=b.getAttr(q["default"].TOTAL_PAGES),d=b.getAttr(q["default"].PAGE_NUMBER),a=b.getAttr(q["default"].PAGE_SIZE),c=b.getAttr(q["default"].SET_SIZE),e=Math.ceil(f/a);f===c-a+1&&e!==d&&(e=g);e!==d&&0<e&&e<=g&&b.setAttr(q["default"].PAGE_NUMBER,e)},Fa=function(b,f){(void 0===f.animationDuration||
0<f.animationDuration)&&!f.silent&&b.setAttr(q["default"].ANIMATING,!0)},Mb=function(b,f,g,d){g?(b.setAttr(q["default"].CURRENTLY_WRAPPING,!0),f.callback=g,f.easingFunction=f.easingFunction||b.getAttr(q["default"].WRAP_EASING),f.animationSpeed=1.3*(t["default"].isFiniteNumber(f.animationSpeed)?f.animationSpeed:b.getAttr(q["default"].ANIMATION_SPEED))):f.callback=d},Ob=function(){function b(){}b.registerStrategy=function(f){switch(f){case R.SEARCH_GRID:(new Nb).register();break;default:throw Error("Invalid carousel Strategy type");
}};return b}(),Pb=function(b){void 0===b&&(b={});return m.__awaiter(void 0,void 0,void 0,function(){var f,g,d,a,c;return m.__generator(this,function(e){switch(e.label){case 0:f=x["default"].cardRoot.getElementsByClassName("a-carousel-container")[0];if(!f)return[2];g=b.carouselDisplayStrategy;d=void 0===g?null:g;d===E.SEARCH_GRID&&(Ob.registerStrategy(R.SEARCH_GRID),Kb.registerStrategy(E.SEARCH_GRID));a=nb["default"].getCarousel(f);c=x["default"].cardRoot.getElementsByClassName("a-carousel-card");
Array.from(c).forEach(function(h){h.setAttribute("style","min-height: auto; margin-bottom: 8px")});return[4,a.initialized];case 1:return e.sent(),Ga(0),a.on("change:pageNumber",function(h){var k=b.shouldToggleNavButtonVisibility,p=b.isDesktop;(void 0===p?0:p)&&(void 0===k?0:k)&&Ga(h.newPageNumber-1)}),[2]}})})},Ga=function(b){var f=x["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],g=x["default"].cardRoot.getElementsByClassName("a-carousel-right")[0],d=x["default"].cardRoot.getElementsByClassName("a-carousel-card").length;
var a=x["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0].clientWidth;var c=x["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;a=Math.floor(a/c);f&&f.classList.toggle("aok-hidden",0===b);g&&g.classList.toggle("aok-hidden",0!==b&&a*(b+1)>=d)},K=function(){function b(){}b.navigatorInternal=navigator;b.isIOS=function(){return t["default"].capabilities.ios};b.isIOSWebView=function(){return t["default"].capabilities.isAmazonApp&&t["default"].capabilities.ios};
b.isWebView=function(){return t["default"].capabilities.isAmazonApp};b.isSafari=function(){return!(!b.navigatorInternal.vendor||!b.navigatorInternal.vendor.match(/apple/i))};return b}(),Qb=function(){return function(b,f,g,d){var a=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(c,e,h){var k=a.adUnitManager?
h:c,p=0;a.adUnitManager&&(p=a.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(h));!a.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=p&&(a.viewMetricsHistoryMap.isAdUnitViewedLogged=!0,a.metricsManager.reportViewMetricsAdUnitViewed(a.videoAdAttributes));!a.viewMetricsHistoryMap.isViewedLogged&&2E3<=k&&(a.viewMetricsHistoryMap.isViewedLogged=!0,a.metricsManager.reportViewMetricsVideoViewed(a.videoAdAttributes));!a.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=c&&(a.viewMetricsHistoryMap.isProgressFiveSecondsLogged=
!0,a.metricsManager.reportViewMetricsVideoProgressFiveSeconds(a.videoAdAttributes));!a.viewMetricsHistoryMap.isFirstQuartileLogged&&c>=.25*e&&(a.viewMetricsHistoryMap.isFirstQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoFirstQuartile(a.videoAdAttributes));!a.viewMetricsHistoryMap.isMidpointLogged&&c>=.5*e&&(a.viewMetricsHistoryMap.isMidpointLogged=!0,a.metricsManager.reportViewMetricsVideoMidpoint(a.videoAdAttributes));!a.viewMetricsHistoryMap.isThirdQuartileLogged&&c>=.75*e&&(a.viewMetricsHistoryMap.isThirdQuartileLogged=
!0,a.metricsManager.reportViewMetricsVideoThirdQuartile(a.videoAdAttributes))};this.onVideoReadyForPlayback=function(c,e,h,k){a.metricsManager.reportVideoReadyForPlayback(c,e,h,a.videoAdAttributes,k)};this.onTimeToFirstFrame=function(c,e,h){a.metricsManager.reportTimeToFirstFrame(c,e,h,a.videoAdAttributes)};this.onVideoPlaybackFailure=function(c,e,h){a.metricsManager.reportVideoPlaybackFailure(c,h,e,a.videoAdAttributes)};this.onVideoPlaying=function(c,e,h){a.metricsManager.reportVideoPlaybackStarted(c,
e,h,a.videoAdAttributes)};this.onVideoPlaybackPaused=function(c,e,h){a.metricsManager.reportVideoPaused(c,e,h,a.videoAdAttributes)};this.onPlaybackCompleted=function(c,e){a.viewMetricsHistoryMap.isCompleteLogged||(a.viewMetricsHistoryMap.isCompleteLogged=!0,a.metricsManager.reportViewMetricsVideoComplete(a.videoAdAttributes));a.metricsManager.reportPlaybackCompleted(c,e,a.videoAdAttributes);if(a.eventHandlerOptions&&a.eventHandlerOptions.onPlaybackCompletedCallback)a.eventHandlerOptions.onPlaybackCompletedCallback()};
this.onVideoBufferingStarted=function(c,e,h){a.bufferStartTimeMs=c;a.metricsManager.reportVideoBufferingStarted(c,e,h,a.videoAdAttributes)};this.onVideoBufferingEnded=function(c,e,h){a.bufferStartTimeMs=0;a.metricsManager.reportVideoBufferingEnded(c,e,h,a.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){a.metricsManager.reportPlaybackFailedToStartAfterPlay(a.videoAdAttributes)};this.onVideoAborted=function(c){a.metricsManager.reportVideoAborted(c,a.videoAdAttributes)};this.onVideoSuspended=
function(c){a.metricsManager.reportVideoSuspended(c,a.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(c){a.metricsManager.reportVideoPlayPromiseRejected(c,a.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=function(){a.metricsManager.reportVideoPlayPromiseNotSupported(a.videoAdAttributes)};this.onVideoMuted=function(c,e){a.metricsManager.reportVideoSoundOff(c,e,a.videoAdAttributes)};this.onVideoUnmuted=function(c,e){a.viewMetricsHistoryMap.isUnmuteLogged||(a.viewMetricsHistoryMap.isUnmuteLogged=
!0,a.metricsManager.reportViewMetricsVideoUnmute(a.videoAdAttributes));a.metricsManager.reportVideoSoundOn(c,e,a.videoAdAttributes)};this.onCcOn=function(c,e,h){a.metricsManager.reportCaptionsOn(c,a.videoAdAttributes,e,h)};this.onCcOff=function(c,e,h){a.metricsManager.reportCaptionsOff(c,a.videoAdAttributes,e,h)};this.onCcLoadFailure=function(){a.metricsManager.reportCaptionsLoadFailure(a.videoAdAttributes)};this.onVideoDurationPlayed=function(c,e,h){a.metricsManager.reportVideoDurationPlayed(c,e,
h,a.videoAdAttributes)};this.onVideoClicked=function(c){var e;a.metricsManager.reportVideoClicked(c,a.videoAdAttributes);if(null===(e=a.eventHandlerOptions)||void 0===e?0:e.onImmersiveVideoCallback)a.eventHandlerOptions.onImmersiveVideoCallback(a.videoAdAttributes)};this.onVideoOnScreen=function(c){a.metricsManager.reportVideoOnScreen(c,a.videoAdAttributes)};this.onVideoOffScreen=function(c,e){a.metricsManager.reportVideoOffScreen(c,0!==a.bufferStartTimeMs,e,a.videoAdAttributes)};this.onVideoPlaybackInitiated=
function(c){a.metricsManager.reportVideoPlaybackInitiated(c,a.videoAdAttributes)};this.onVideoPauseInitiated=function(c){a.metricsManager.reportVideoPauseInitiated(c,a.videoAdAttributes)};this.onVideoViewed=function(c){a.metricsManager.reportVideoView(c,K.isIOSWebView(),a.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){a.metricsManager.reportAudioToggleIconDisplayed(a.videoAdAttributes)};this.metricsManager=b;this.videoAdAttributes=f;this.bufferStartTimeMs=0;this.eventHandlerOptions=
g;this.adUnitManager=d}}(),Ha=function(){return function(b,f){var g=this;this.reportIfBoundaryCrossed=function(d,a,c,e,h){g.isValidBoundaryTime(c)&&(d<=a?g.insideInterval(d,a)&&g.callback(g.boundaryTime,e,h):(g.insideInterval(0,a)||g.insideInterval(d,c))&&g.callback(g.boundaryTime,e,h))};this.insideInterval=function(d,a){return g.boundaryTime>d&&g.boundaryTime<=a};this.isValidBoundaryTime=function(d){return 0<=g.boundaryTime&&g.boundaryTime<=d};this.boundaryTime=b;this.callback=f}}(),B;(function(b){b.PLAYING=
"playing";b.PAUSED="paused";b.BUFFERING="buffering";b.INITIATED="initiated";b.END="ended"})(B||(B={}));var Rb=function(){return function(b,f,g,d){var a=this;void 0===g&&(g=[]);void 0===d&&(d=[]);this.play=function(c){a.initiatedPlayTime||(a.initiatedPlayTime=c);return a.playbackState!==B.PLAYING&&a.videoElement.paused?(c=a.playInternal())?c:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){a.playbackState!==B.PAUSED&&a.playbackState===B.PLAYING&&(a.playbackState=B.PAUSED,a.videoElement.pause())};
this.seekToStart=function(){a.accrueContinuousPlaybackDuration(a.getCurrentTimeMs());a.lastOnTimeUpdateCurrentTimeMs=0;a.videoElement.currentTime=0};this.mute=function(){a.videoElement.muted=!0};this.unmute=function(){a.videoElement.muted=!1};this.isMuted=function(){return a.videoElement.muted};this.toggleCaptions=function(c){a.videoElement.textTracks[0].mode=c?"showing":"hidden"};this.getCaptionLang=function(){return null!=a.videoElement.textTracks[0].language?a.videoElement.textTracks[0].language:
"No Language Given"};this.getCurrentTimeMs=function(){return Math.round(1E3*a.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a.videoElement.duration)};this.getDroppedFrames=function(){return a.videoElement.getVideoPlaybackQuality?a.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==a.videoElement.webkitDroppedFrameCount?a.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return a.continuousDurationAccruedPlayTimeMs+
(a.getCurrentTimeMs()-a.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var c=a.getCurrentTimeMs();a.continuousDurationAccruedPlayTimeMs=0;c===a.getDurationMs()?a.continuousDurationStartTimeMs=0:a.continuousDurationStartTimeMs=c;a.continuousDurationBoundaryChecks.forEach(function(e){e.resetReported()})};this.getPercentDownloaded=function(){var c=a.videoElement.buffered;if(!c)return 0;for(var e=0,h=0;h<c.length;h++)e+=c.end(h)-c.start(h);return e/a.videoElement.duration};
this.load=function(){a.videoElement.load()};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return a.videoElement.play()};this.videoOnCanPlayEvent=function(){if(!a.assetLoaded){var c=a.getDateTime()-a.loadStartTime;a.eventHandler.onVideoReadyForPlayback(c,a.retryLoadCount,a.getPercentDownloaded(),a.getDurationMs());a.assetLoaded=!0}};this.videoOnErrorEvent=function(){!a.assetLoaded&&3>a.retryLoadCount?(a.retryLoadCount++,setTimeout(a.videoElement.load.bind(a.videoElement),
2E3)):a.handleVideoPlaybackFailureEvent()};this.videoOnPlayingEvent=function(){a.handleFirstFramePlayedEvent();if(a.playbackState===B.BUFFERING)a.eventHandler.onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());if(a.playbackState!==B.END)a.eventHandler.onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a.playbackState=B.PLAYING};this.videoOnPauseEvent=function(){a.videoElement.currentTime!==a.videoElement.duration&&(a.playbackState=
B.PAUSED,a.eventHandler.onVideoPlaybackPaused(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames()))};this.videoOnEndedEvent=function(){return m.__awaiter(a,void 0,void 0,function(){return m.__generator(this,function(c){switch(c.label){case 0:return this.playbackState=B.END,this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),this.videoElement.dataset.disableLooping&&"false"!==this.videoElement.dataset.disableLooping?
[3,2]:[4,this.playInternal()];case 1:c.sent(),c.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){a.playbackState=B.BUFFERING;a.eventHandler.onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var c=a.getCurrentTimeMs(),e=a.getContinuousPlaybackDurationMs();a.continuousDurationBoundaryChecks.forEach(function(h){h.reportIfBoundaryCrossed(e)});a.boundaryChecks.forEach(function(h){h.reportIfBoundaryCrossed(a.lastOnTimeUpdateCurrentTimeMs,
c,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});a.lastOnTimeUpdateCurrentTimeMs=c;a.eventHandler.onVideoTimeUpdated(c,a.getDurationMs(),e)};this.videoOnAbortEvent=function(){a.eventHandler.onVideoAborted(a.getCurrentTimeMs())};this.videoOnSuspendEvent=function(){a.eventHandler.onVideoSuspended(a.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!a.firstFramePlayed){var c=a.getDateTime()-a.initiatedPlayTime;a.eventHandler.onTimeToFirstFrame(c,a.getPercentDownloaded(),
a.getDroppedFrames());a.firstFramePlayed=!0}};this.handleVideoPlaybackFailureEvent=function(){if(a.videoElement.error){var c=a.translateVideoErrorCode(a.videoElement.error.code);a.eventHandler.onVideoPlaybackFailure(a.getCurrentTimeMs(),c,a.videoElement.error.message)}};this.translateVideoErrorCode=function(c){switch(c){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return c?c.toString():"UNKNOWN"}};
this.accrueContinuousPlaybackDuration=function(c){a.continuousDurationAccruedPlayTimeMs+=c-a.continuousDurationStartTimeMs;a.continuousDurationStartTimeMs=0};this.videoElement=b;this.eventHandler=f;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=g;this.continuousDurationBoundaryChecks=d;this.playbackState=B.INITIATED;this.loadStartTime=this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstFramePlayed=
!1;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onsuspend=this.videoOnSuspendEvent;4===this.videoElement.readyState&&
(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0);if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");b=this.videoElement.dataset.poster;this.videoElement.poster!==b&&(this.videoElement.poster=b)}}(),Sb=function(){function b(){}b.getPercentInView=function(f,g){var d=D().defaultView;try{var a=d.innerWidth||d.clientWidth||0,c=d.innerHeight||d.clientHeight||0,e=b.getNormalizedBoundingRect(f),
h=b.getViewableSegment(e.top,e.bottom,c),k=b.getViewableSegment(e.left,e.right,a);f=void 0;f=(null===g||void 0===g?0:g.shouldAreaOnlyUseElementWidth)?e.width:Math.min(e.width,a);return h*k/(e.height*f)}catch(p){return 0}};b.getViewableSegment=function(f,g,d){return f>d&&g>d?0:Math.min(0<f?d-f:0<g?Math.min(g,d):0,g-f)};b.getNormalizedBoundingRect=function(f){f=f.getBoundingClientRect();f.height=f.height||f.bottom-f.top;f.width=f.width||f.right-f.left;return f};return b}(),ma=function(){function b(){}
b.registeredElements=[];b.attachedToViewWillDisappear=!1;b.registerElement=function(f,g,d,a,c,e,h,k){f={callback:e,dispatchOnElementInView:d,dispatchOnElementOutOfView:a,element:f,isInView:void 0,ratioInView:g,recurring:c,eventData:h,options:k};0===b.registeredElements.length&&b.attachListeners();b.registeredElements.push(f);b.handleViewChange(f)};b.deregisterElement=function(f,g,d,a,c){b.registeredElements=b.registeredElements.filter(function(e){return!(e.element===f&&e.ratioInView===g&&e.dispatchOnElementInView===
d&&e.dispatchOnElementOutOfView===a&&e.recurring===c)});0===b.registeredElements.length&&b.detachListeners()};b.emitViewabilityChange=function(f,g){f.isInView=g;f.callback(f.ratioInView,g,f.eventData);f.recurring||b.deregisterElement(f.element,f.ratioInView,f.dispatchOnElementInView,f.dispatchOnElementOutOfView,f.recurring)};b.handleRatioInViewChange=function(f,g){f.dispatchOnElementInView&&g>=f.ratioInView&&!f.isInView&&b.emitViewabilityChange(f,!0);f.dispatchOnElementOutOfView&&g<f.ratioInView&&
f.isInView&&b.emitViewabilityChange(f,!1)};b.handleBrowserHidden=function(f){b.handleRatioInViewChange(f,0)};b.handleViewChange=function(f){b.handleRatioInViewChange(f,Sb.getPercentInView(f.element,f.options))};b.onBrowserHidden=function(){b.registeredElements.forEach(b.handleBrowserHidden)};b.onBrowserShown=function(){b.registeredElements.forEach(b.handleViewChange)};b.onBrowserVisibilityChange=function(){if(D().hidden)b.onBrowserHidden();else setTimeout(b.onBrowserShown,50)};b.toggleBrowserVisibility=
function(){b.onBrowserHidden();b.onBrowserShown()};b.attachListeners=function(){b.throttledOnBrowserViewChange||(b.throttledOnBrowserViewChange=t["default"].throttle(function(){b.registeredElements.forEach(b.handleViewChange)},50));t["default"].on("afterReady",b.throttledOnBrowserViewChange);t["default"].on(t["default"].constants.BROWSER_EVENTS.SCROLL,b.throttledOnBrowserViewChange);t["default"].on(t["default"].constants.BROWSER_EVENTS.RESIZE,b.throttledOnBrowserViewChange);t["default"].on(t["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,
b.throttledOnBrowserViewChange);var f=D().defaultView;z.addEventListener(f,"beforeunload",1,b.onBrowserHidden);z.addEventListener(D(),"visibilitychange",1,b.onBrowserVisibilityChange);K.isWebView()||(z.addEventListener(f,"focus",1,b.onBrowserShown),z.addEventListener(f,"blur",1,b.onBrowserHidden));K.isSafari()&&!K.isWebView()&&(z.addEventListener(f,"pagehide",1,b.onBrowserHidden),z.addEventListener(f,"pageshow",1,b.onBrowserShown),z.addEventListener(f,"popstate",1,b.toggleBrowserVisibility));b.attachToViewWillDisappear()};
b.detachListeners=function(){t["default"].off("afterReady",b.throttledOnBrowserViewChange);t["default"].off(t["default"].constants.BROWSER_EVENTS.SCROLL,b.throttledOnBrowserViewChange);t["default"].off(t["default"].constants.BROWSER_EVENTS.RESIZE,b.throttledOnBrowserViewChange);t["default"].off(t["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,b.throttledOnBrowserViewChange);var f=D().defaultView;z.removeEventListener(D(),"visibilitychange",1,b.onBrowserVisibilityChange);z.removeEventListener(f,
"beforeunload",1,b.onBrowserHidden);K.isWebView()||(z.removeEventListener(f,"focus",1,b.onBrowserShown),z.removeEventListener(f,"blur",1,b.onBrowserHidden));K.isSafari()&&!K.isWebView()&&(z.removeEventListener(f,"pagehide",1,b.onBrowserHidden),z.removeEventListener(f,"pageshow",1,b.onBrowserShown),z.removeEventListener(f,"popstate",1,b.toggleBrowserVisibility))};b.attachToViewWillDisappear=function(){if(!b.attachedToViewWillDisappear){var f=D().defaultView;b.attachedToViewWillDisappear=!0;f.app||
(f.app={});b.previousViewWillDisappear=f.app.willDisappear;f.app.willDisappear=function(){b.onBrowserHidden();b.previousViewWillDisappear&&b.previousViewWillDisappear()}}};return b}(),Tb=function(){return function(b,f,g,d,a,c){var e=this;void 0===d&&(d=!1);void 0===a&&(a=!1);void 0===c&&(c={});this.getVideoCurrentTimeMs=function(){return e.videoPlayer.getCurrentTimeMs()};this.setMuteStatus=function(h,k){e.isMuted=h;e.setMuteButtonStatus(h);e.muteClickRegion&&(h?(e.videoPlayer.mute(),e.videoEventHandler.onVideoMuted(e.getVideoCurrentTimeMs(),
k)):(e.videoPlayer.unmute(),e.videoEventHandler.onVideoUnmuted(e.getVideoCurrentTimeMs(),k)))};this.play=function(){if(e.isPlaying())return Promise.resolve();e.videoPlayer.resetContinuousPlaybackDurationMs();e.videoEventHandler.onVideoPlaybackInitiated(e.getVideoCurrentTimeMs());e.showPlayButton(!1);e.muteClickRegion&&(e.muteClickRegion.style.display="block",e.videoEventHandler.onAudioToggleIconDisplayed(),e.muteClickRegion.style.visibility="visible");if(e.ccTrack){e.ccTrack.onerror=e.ccLoadFailure;
e.ccShowing=!1;if(e.ccTrackFail)e.ccLoadFailure();else if(e.ccClickRegion)e.ccClickRegion.style.display="block",e.ccClickRegion.style.visibility="visible",e.videoEventHandler.onCcOn(Q.DEFAULT_ON,e.videoPlayer.getCaptionLang(),!1);else e.videoEventHandler.onCcOn(Q.DEFAULT_ON,e.videoPlayer.getCaptionLang(),!0);e.toggleCC()}return e.videoPlayer.play(Date.now()).then().catch(function(h){var k="string"===typeof h?h:"";h instanceof DOMException&&(k=h.name+": "+h.message);e.showPlayButton(!0);e.muteClickRegion&&
(e.muteClickRegion.style.visibility="hidden");e.ccClickRegion&&(e.ccClickRegion.style.visibility="hidden");if(k.startsWith("NotSupported"))e.videoEventHandler.onVideoPlayPromiseNotSupported();e.videoEventHandler.onVideoPlayPromiseRejected(k)})};this.pause=function(h){e.isPaused()||(e.videoEventHandler.onVideoPauseInitiated(e.getVideoCurrentTimeMs()),e.videoEventHandler.onVideoViewed(e.videoPlayer.getContinuousPlaybackDurationMs()),e.videoPlayer.resetContinuousPlaybackDurationMs(),!h&&e.videoOptions.shouldEnablePlayButton&&
e.showPlayButton(!0),e.muteClickRegion&&(e.muteClickRegion.style.visibility="hidden"),e.ccTrack&&(e.ccClickRegion&&(e.ccClickRegion.style.visibility="hidden"),e.toggleCC()),e.videoPlayer.pause())};this.onOnePercentViewabilityChange=function(h,k){h=Date.now();k?(e.onScreenStartTime=h,e.videoEventHandler.onVideoOnScreen(e.videoPlayer.getPercentDownloaded())):(e.videoPlayer.isMuted()||e.setMuteStatus(!0,Y.VIDEO_OFF_SCREEN),e.videoEventHandler.onVideoOffScreen(h-e.onScreenStartTime,e.getVideoCurrentTimeMs()),
e.onScreenStartTime=0,e.videoPlayer.seekToStart(),e.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(h,k,p){k?e.play().catch():e.pause(p)};this.setVideoOptions=function(h){e.videoOptions=h};this.isPlaying=function(){return e.videoPlayer.playbackState===B.PLAYING};this.isPaused=function(){return e.videoPlayer.playbackState===B.PAUSED};this.buildBoundaryListeners=function(){return[new Ha(2E3,e.videoEventHandler.onVideoDurationPlayed),new Ha(15E3,e.videoEventHandler.onVideoDurationPlayed)]};
this.toggleAudio=function(){e.setMuteStatus(!e.videoPlayer.isMuted(),Y.ICON_TAP)};this.toggleCC=function(){e.ccShowing=!e.ccShowing;e.videoPlayer.toggleCaptions(e.ccShowing);e.ccButtonOff&&e.ccButtonOn&&(e.ccShowing?(e.videoEventHandler.onCcOn(Q.ICON_TAP,e.videoPlayer.getCaptionLang(),!1),e.ccButtonOn.style.opacity="1",e.ccButtonOff.style.opacity="0"):(e.videoEventHandler.onCcOff(Q.ICON_TAP,e.videoPlayer.getCaptionLang(),!1),e.ccButtonOn.style.opacity="0",e.ccButtonOff.style.opacity="1"))};this.showPlayButton=
function(h){e.playClickRegion&&(e.playClickRegion.style.visibility=h?"inherit":"hidden")};this.ccLoadFailure=function(){e.ccTrackFail=!0;e.videoEventHandler.onCcLoadFailure();e.ccClickRegion&&(e.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(h){e.muteButton&&e.unmuteButton&&(h?(e.unmuteButton.style.fillOpacity="0",e.muteButton.style.fillOpacity="1"):(e.muteButton.style.fillOpacity="0",e.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){e.videoEventHandler.onVideoClicked(e.getVideoCurrentTimeMs())};
this.element=b;this.videoAdAttributes=g;this.videoEventHandler=f;this.videoOptions=c;b=this.videoOptions.shouldEnablePlayButton;f=this.element.querySelector("video");g=this.buildBoundaryListeners();this.videoPlayer=new Rb(f,this.videoEventHandler,g);a||this.videoPlayer.load();this.element.querySelectorAll("a").forEach(function(h){h.addEventListener("click",e.logClick)});if(this.muteClickRegion=this.element.querySelector('[data-type="audioToggleContainer"]'))this.muteButton=this.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),
this.unmuteButton=this.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),this.setMuteButtonStatus(this.videoPlayer.isMuted()),this.muteClickRegion.addEventListener("click",this.toggleAudio),this.isMuted=this.videoPlayer.isMuted();this.ccTrackFail=!1;if(this.ccTrack=this.element.querySelector('[data-type="ccTrack"]'))this.ccTrack.onerror=this.ccLoadFailure;if(this.ccClickRegion=this.element.querySelector('[data-type="ccToggleContainer"]'))this.ccClickRegion.style.visibility="hidden",
this.ccButtonOff=this.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),this.ccButtonOn=this.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),this.ccClickRegion.addEventListener("click",this.toggleCC);this.playClickRegion=this.element.querySelector('[data-type="playIcon"]');this.showPlayButton(b);d||(ma.registerElement(f,.5,!0,!0,!0,this.onFiftyPercentViewabilityChange),ma.registerElement(f,.01,!0,!0,!0,this.onOnePercentViewabilityChange))}}(),Ub=function(){return function(b,f){var g,
d=this;this.getTreatment=function(p){if(0===d.weblabsMap.size)ia["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",d.attribution);else{if(d.weblabsMap.has(p))return d.weblabsMap.get(p);ia["default"].log("Get treatment for unknown weblab","ERROR",d.attribution)}};var a=new Map;b=b.split(",").filter(function(p){return 0<p.length});if(0<b.length)try{for(var c=m.__values(b),e=c.next();!e.done;e=c.next()){var h=e.value.split(":");a.set(h[0].trim(),h[1].trim())}}catch(p){var k=
{error:p}}finally{try{e&&!e.done&&(g=c.return)&&g.call(c)}finally{if(k)throw k.error;}}this.weblabsMap=a;this.attribution=f}}(),Z;(function(b){b.DESKTOP="Desktop";b.MOBILE="Mobile"})(Z||(Z={}));var H;(function(b){b.VIDEO_SINGLE_PRODUCT="video-single-product";b.MULTI_BRAND_VIDEO="multi-brand-video";b.VIDEO_SINGLE_BRAND="video-single-brand";b.VIDEO_STORE="video-store";b.VIDEO_STORE_PRODUCT_FEATURE="video-store-product-feature";b.VIDEO_PRODUCT_COLLECTION="video-product-collection";b.SHORT_FORM_VIDEO=
"short-form-video";b.THEMATIC_VIDEO="thematic-video"})(H||(H={}));var aa;(function(b){b.SPARKLE_MOBILE="loom-mobile-top-slot";b.SPARKLE_DESKTOP="loom-desktop-top-slot";b.INLINE_MOBILE="loom-mobile-inline-slot";b.INLINE_DESKTOP="loom-desktop-inline-slot";b.BOTTOM_MOBILE="loom-mobile-bottom-slot";b.BOTTOM_DESKTOP="loom-desktop-bottom-slot"})(aa||(aa={}));var ba,na,ca,da,ea,fa,ha,F={SBV_468340:"SBV_468340",SBV_672322:"SBV_672322",SBV_708584:"SBV_708584"},Ia=m.__assign(m.__assign({},F),{SBV_623814:"SBV_623814",
SBV_633512:"SBV_633512",SBV_633539:"SBV_633539",SBV_633907:"SBV_633907"}),Ja=m.__assign(m.__assign({},Ia),{MBV_394048:"MBV_394048",MBV_624077:"MBV_624077",SBV_414150:"SBV_414150",SBV_427616:"SBV_427616",SBV_620747:"SBV_620747",SBV_620753:"SBV_620753",SBV_642751:"SBV_642751",SBV_656845:"SBV_656845",SBV_668132:"SBV_668132",BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983:"BUYX_DP_PAPERCUT_EXPERIMENTS_PRICE_COLOR_705983"}),Ka=m.__assign(m.__assign({},Ia),{MBV_394383:"MBV_394383",MBV_624086:"MBV_624086",
SBV_414153:"SBV_414153",SBV_427647:"SBV_427647",SBV_620032:"SBV_620032",SBV_620033:"SBV_620033",SBV_642769:"SBV_642769",SBV_656827:"SBV_656827",SBV_668135:"SBV_668135",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273"}),La=m.__assign(m.__assign({},F),{SBV_649291:"SBV_649291",SBV_686031:"SBV_686031"}),Ma=m.__assign(m.__assign({},F),{SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713:"SB_DP_THEMATIC_HRB_VIDEO_DESKTOP_598713"}),Na=m.__assign(m.__assign({},F),{SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714:"SB_DP_THEMATIC_HRB_VIDEO_MOBILE_598714"}),
Oa=m.__assign(m.__assign({},F),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),Pa=m.__assign(m.__assign({},F),{SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"}),oa=m.__assign(m.__assign({},F),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175"}),pa=m.__assign(m.__assign({},F),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",SBV_635550:"SBV_635550",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_716513:"SBV_716513",
SBV_737682:"SBV_737682"}),Qa=m.__assign(m.__assign({},F),{SBV_716513:"SBV_716513",SBV_716636:"SBV_716636",SBV_737682:"SBV_737682",SEARCH_637704:"SEARCH_637704"}),Ra=m.__assign(m.__assign(m.__assign({},F),Qa),{SEARCH_737855:"SEARCH_737855",SBV_743352:"SBV_743352"}),Sa=m.__assign(m.__assign(m.__assign({},F),Qa),{SBV_642079:"SBV_642079",SBV_683140:"SBV_683140",SBV_716346:"SBV_716346",SEARCH_737563:"SEARCH_737563"}),qa=m.__assign(m.__assign(m.__assign(m.__assign(m.__assign(m.__assign(m.__assign(m.__assign(m.__assign(m.__assign(m.__assign({},
Ja),Ka),Oa),Pa),oa),pa),Ra),Sa),La),Ma),Na),S=Z.DESKTOP,L=Z.MOBILE,Vb=H.MULTI_BRAND_VIDEO,Wb=H.SHORT_FORM_VIDEO,Xb=H.THEMATIC_VIDEO,Yb=H.VIDEO_SINGLE_BRAND,Zb=H.VIDEO_PRODUCT_COLLECTION,$b=H.VIDEO_STORE,ac=H.VIDEO_STORE_PRODUCT_FEATURE;var I={};I[Vb]=(ba={},ba[S]=Ja,ba[L]=Ka,ba);I[Wb]=(na={},na[L]=La,na);I[Xb]=(ca={},ca[S]=Ma,ca[L]=Na,ca);I[Yb]=(da={},da[S]=Oa,da[L]=Pa,da);I[Zb]=(ea={},ea[S]=Ra,ea[L]=Sa,ea);I[$b]=(fa={},fa[S]=oa,fa[L]=oa,fa);I[ac]=(ha={},ha[S]=pa,ha[L]=pa,ha);I;var W;(function(b){b.C=
"C";b.T1="T1";b.T2="T2";b.T3="T3";b.T4="T4";b.T5="T5";b.T6="T6";b.T7="T7"})(W||(W={}));var Ta=function(b){return b===aa.SPARKLE_DESKTOP||b===aa.SPARKLE_MOBILE},bc=function(){return function(b,f,g){var d=this;this.onBackgroundClicked=function(){d.metricsManager.reportBackgroundClicked(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes)};this.onCtaClicked=function(){d.metricsManager.reportBrandCtaLinkClicked(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes)};
this.onHeadlineClicked=function(){d.metricsManager.reportHeadlineClicked(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes)};this.onBrandCtaLinkClicked=function(){d.metricsManager.reportBrandCtaLinkClicked(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){d.metricsManager.reportBrandLogoClicked(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes)};this.productReceived=function(a){var c;void 0===a&&
(a=0);var e=(null===(c=d.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<d.widgetEventAttributes.productAttributes.length?d.widgetEventAttributes.productAttributes[a]:void 0;d.metricsManager.reportProductReceived(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes,e)};this.onProductClicked=function(a){var c;void 0===a&&(a=0);var e=(null===(c=d.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<d.widgetEventAttributes.productAttributes.length?d.widgetEventAttributes.productAttributes[a]:
void 0;d.metricsManager.reportProductClicked(d.videoManager.getVideoCurrentTimeMs(),d.videoManager.videoAdAttributes,e)};this.metricsManager=b;this.videoManager=f;this.widgetEventAttributes=g}}(),cc=function(){function b(f,g){var d=this;this.setupBackgroundEvent=function(){d.widgetElements.backgroundElement&&d.widgetElements.backgroundElement.addEventListener("click",d.widgetEventHandler.onBackgroundClicked)};this.setupBrandLogoEvent=function(){d.widgetElements.brandLogoElement&&d.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
d.widgetEventHandler.onBrandLogoClicked)});d.widgetElements.brandElement&&d.widgetElements.brandElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",d.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=function(){d.widgetElements.callToActionElement&&d.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",d.widgetEventHandler.onCtaClicked)})};this.setupHeadlineEvent=function(){d.widgetElements.headlineElement&&
d.widgetElements.headlineElement.querySelectorAll("*").forEach(function(a){a.addEventListener("click",d.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=function(){d.widgetElements.productElements&&d.widgetElements.productElements.forEach(function(a,c){d.widgetEventHandler.productReceived(c);a.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){d.widgetEventHandler.onProductClicked(c)})})})};this.widgetElements=f;this.widgetEventHandler=g}b.prototype.setupWidgetEvents=
function(){this.setupBackgroundEvent();this.setupBrandLogoEvent();this.setupCallToActionEvent();this.setupHeadlineEvent();this.setupProductEvents()};return b}(),dc=function(){return function(b){var f=this;this.attach=function(){f.setupAdUnitViewability()};this.setupAdUnitViewability=function(){ma.registerElement(f.adUnitElement,.5,!0,!0,!0,f.onFiftyPercentViewabilityChange,void 0,{shouldAreaOnlyUseElementWidth:!0})};this.onFiftyPercentViewabilityChange=function(g,d){f.adUnitInView=d};this.isAdUnitInView=
function(){return f.adUnitInView};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(g){f.isAdUnitInView()?f.videoDurationTotalMsWhenAdInViewFirst=g-f.videoDurationStartTimeMsWhenAdInViewFirst:(f.videoDurationTotalMsWhenAdInViewFirst=0,f.videoDurationStartTimeMsWhenAdInViewFirst=g);return f.videoDurationTotalMsWhenAdInViewFirst};this.adUnitElement=b;this.adUnitInView=!1;this.videoDurationTotalMsWhenAdInViewFirst=this.videoDurationStartTimeMsWhenAdInViewFirst=0}}(),fc=function(b){return m.__awaiter(void 0,
void 0,void 0,function(){var f,g,d,a,c;return m.__generator(this,function(e){if(!x["default"].cardRoot.dataset.properties)return A.count("sbVideoProductCollectionNoProps"),[2];f=JSON.parse(x["default"].cardRoot.dataset.properties);g=new Ub(f.weblabs,f.widgetType);a=(d=Ta(f.widgetGroupId))||g.getTreatment(qa.SBV_716636)!==W.T1?N.DOM_READY:N.AF;c=function(){ec(f,g,b)};qb(c,a);return[2]})})},ec=function(b,f,g){return m.__awaiter(void 0,void 0,void 0,function(){var d,a,c,e,h,k,p,r,v,u,w,y,M,X,ra,Ua,sa,
ta,Va,Wa,Xa;return m.__generator(this,function(Ya){switch(Ya.label){case 0:d=g.enableAdFeedback;a=g.carouselClientOptions;c=f.getTreatment(qa.SBV_672322)===W.T1;e=b.hideBrandLogoHeader;h=f.getTreatment(qa.SBV_737682)===W.T1&&Ta(b.widgetGroupId);k={shouldLogViewMetrics:!0,shouldLogAdUnitViewMetrics:h};p=new Ab({clientId:b.clientId,deviceEnv:t["default"].capabilities.isAmazonApp?"app":"web",deviceOs:Db(),deviceType:Ea(),language:b.language,marketplaceId:b.marketplaceId,pageNumber:b.pageNumber,pageType:b.pageType,
searchQuery:b.searchQuery,stage:Aa.getStage(),weblabs:b.weblabs,widgetGroupId:b.widgetGroupId,widgetIndex:void 0,widgetType:b.widgetType},Bb(b.marketplaceId),k);p.reportResponseReceived();r={advertiserId:b.advertiserId,campaignId:b.campaignId,contentHash:b.contentHash,headline:b.headline,imageUrl:b.imageUrl,storeCta:b.storeCta,instrumentationPixelUrl:b.instrumentationPixelUrl,linkUrl:b.clickUrl,metricsIdentifier:b.metricsIdentifier,videoPreviewImageSrc:b.videoPreviewImageSrc,videoSrc:b.videoSrc,ccSrc:b.ccSrc};
v=x["default"].cardRoot.querySelector('[data-type="videoContainer"]');u=x["default"].cardRoot.querySelector('[data-type="backgroundLink"]');w=x["default"].cardRoot.querySelector('[id="ctaContainer"]');y=x["default"].cardRoot.querySelector('[id="headlineContainer"]');M=x["default"].cardRoot.querySelectorAll('[data-type="productContainer"]');X=x["default"].cardRoot.querySelector(".sbv-ad-content-container");if(!v)return p.reportMissingVideoElement(r),[2];h&&X&&(ra=new dc(X),ra.attach());Ua=new Qb(p,
r,{},ra);sa=new Tb(v,Ua,r);if(!u)return p.reportMissingBackgroundElement(r),[2];ta=gc(M,p,r);if(!ta.length)return[2];Va=new bc(p,sa,{productAttributes:ta});Wa=new cc({backgroundElement:u,callToActionElement:w,headlineElement:y,productElements:M},Va);Wa.setupWidgetEvents();if(e)p.reportPDPRenderedAsPC(r);else if(!w||!y)return p.reportMissingBrandElement(r),[2];la();wb(p,{cardName:"sbVideoProductCollection",enableAdFeedback:d,isAdFeedbackForCards:c});(Xa=x["default"].cardRoot.querySelector('[data-type="playIcon"]'))&&
Xa.addEventListener("click",function(pc){return sa.play()});return[4,Pb(a)];case 1:return Ya.sent(),[2]}})})},gc=function(b,f,g){var d=[];if(!b)return f.reportMissingProductElements(g),d;f.reportNumAsins(b.length);b.forEach(function(a,c){var e,h;void 0===(null===(e=a.dataset)||void 0===e?void 0:e.asinadattributesprops)?ia["default"].log("Asin product attribute missing"):(a=JSON.parse(null===(h=a.dataset)||void 0===h?void 0:h.asinadattributesprops),f.reportProductAttributes(g,a),d.push(m.__assign(m.__assign({},
a),{productIndex:c})))});return d},T=function(b,f){return b.querySelector("[class*="+f+"]")},hc=function(b,f,g){b=JSON.parse(b);b.adCreativeMetaData=f.adCreativeMetaData;b.feedbackFormContainerId=g;return encodeURI(JSON.stringify(b))},ic=function(b,f,g,d){return m.__awaiter(void 0,void 0,void 0,function(){var a,c,e,h,k,p,r,v;return m.__generator(this,function(u){a="adFeedbackModal_"+b;u=(null===(v=T(f,"ad-feedback-modal-container"))||void 0===v?void 0:v.className)||"";c="."+f.className+" ."+u.replace(" ",
".");h=(e=g().adCreativeMetaData.adCreativeDetails)?e.length:0;k=f.dataset.deviceType||"desktop";u=Math.max(560,125*h+130);var w=h;var y=k;w=d&&"true"===d.toLowerCase()?2>w?590:810:"tablet"==y?2>w?545:775:2>w?430:645;p={a11yOpenMessage:"",width:u,height:w};try{return r=ob["default"].create(a,c,p),[2,r]}catch(M){throw A.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+M);}})})},lc=function(b,f,g,d,a,c){var e="rtl"===document.getElementsByTagName("html")[0].dir?
"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var h=T(J["default"].cardRoot,e);b.on("beforeShow",function(){return m.__awaiter(void 0,void 0,void 0,function(){var k;return m.__generator(this,function(p){switch(p.label){case 0:return k=jc(b,f,g),[4,b.render(function(r){var v="250px",u=g().adCreativeMetaData.adCreativeDetails;u&&2>u.length&&(v="150px");h.style.marginTop=v;r.innerHTML="";v=r.appendChild;u=document.getElementsByTagName("html")[0].dir;var w=J["default"].createElement("div"),
y=J["default"].createElement("div");w.innerHTML=a;"rtl"===u?(w.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),y.setAttribute("style",
'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(w.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),y.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
y.appendChild(w);v.call(r,y);v=document.getElementsByTagName("html")[0].dir;u=J["default"].createElement("div");"rtl"===v?u.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):u.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");kc(h,u,d,k,c);r.appendChild(u)})];case 1:return p.sent(),[2]}})})})},jc=function(b,f,g){g=g();var d=g.adCreativeMetaData.adCreativeDetails;
null===d||void 0===d?void 0:d.sort(function(a,c){return a.adCreativeIndex<c.adCreativeIndex?-1:1});return hc(f,g,b.id)},kc=function(b,f,g,d,a){f.appendChild(b);"function"==typeof A.uet&&A.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});pb["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===g?"en-US":g}},{pl:d,deviceType:"desktop"}).then(function(c){return m.__awaiter(void 0,
void 0,void 0,function(){var e,h,k;return m.__generator(this,function(p){"function"==typeof A.uet&&A.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});A.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);e=J["default"].createElement("div");e.innerHTML=String(c.responseBody);for(h=0;h<e.children.length;++h)k=e.children[h],"SCRIPT"===k.tagName?ua("script",k,f):"LINK"===k.tagName?ua("link",k,f):ua("div",k,f);f.removeChild(b);return[2]})})}).catch(function(){"function"==
typeof A.uet&&A.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});A.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);f.innerHTML=a});"function"==typeof A.uex&&A.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},ua=function(b,f,g){var d=J["default"].createElement(b);d.innerHTML=f.innerHTML;f.getAttributeNames().forEach(function(a){d.setAttribute(a,f.getAttribute(a)||"")});g.appendChild(d)},Za={},mc=function(b,f){return m.__awaiter(void 0,
void 0,void 0,function(){var g,d,a,c,e,h,k,p,r;return m.__generator(this,function(v){g=T(b,"ad-feedback-primary-link");d=f().adFeedbackLabelId;a=xa["default"].setup();c="open-modal"+d;e=f().adCreativeMetaData.adCreativeDetails;h=b.dataset;k=h.isDsaEnabled;p=h.weblabTreatment;r=String(k);"undefined"===r&&(r=e&&0<e.length?e[0].selectionSignals?"true":"false":"false");"true"===r&&"T1"!==p&&(r="false");a.attach(c,g);a.define(c,"click",function(){return m.__awaiter(void 0,void 0,void 0,function(){var u;
return m.__generator(this,function(w){switch(w.label){case 0:return(u=Za[d])?[3,2]:[4,ic(d,b,f,r)];case 1:u=w.sent();var y=b.dataset,M=y.formHeaderText,X=y.dsaFormHeaderText;lc(u,y.adFeedbackPayload,f,y.currentLocale,"true"===r?X:M,y.formLoadErrorText);Za[d]=u;w.label=2;case 2:return u.show(),[2]}})})});return[2]})})},nc=function(b,f){var g=xa["default"].setup(),d="mouse-enter"+f;f="mouse-leave"+f;var a=T(b,"ad-feedback-primary-link"),c=T(b,"ad-feedback-text-desktop"),e=T(b,"ad-feedback-sprite");
g.attach(d,a);g.define(d,"mouseenter",function(){e.style.backgroundPosition="0px -12px";c.style.color="#111111"});g.attach(f,a);g.define(f,"mouseleave",function(){e.style.backgroundPosition="0px 0px";c.style.color="#555"})},oc=function(b){return m.__awaiter(void 0,void 0,void 0,function(){var f,g,d,a;return m.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),f=b(),g=x["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+f.adFeedbackLabelId)[0],d=g.dataset.isSponsoredLabelActive,
"false"===(d||"false").toLowerCase()?[2]:[4,nc(g,f.adFeedbackLabelId)];case 1:return c.sent(),[4,mc(g,b)];case 2:return c.sent(),[3,4];case 3:throw a=c.sent(),A.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+a);case 4:return[2]}})})};va._operationNames=[];va.card=function(){return m.__awaiter(void 0,void 0,void 0,function(){var b;return m.__generator(this,function(f){b={isDesktop:!0,shouldToggleNavButtonVisibility:!0,
carouselDisplayStrategy:E.SEARCH_GRID};fc({enableAdFeedback:oc,carouselClientOptions:b});return[2]})})}});
